#!/usr/bin/env bash
source "$DOTFILES/sources/strict.bash"

# gets drives, their labels (aka models), and their serial numbers
while IFS=$'\t' read -r drive size model; do
	serial="$(sudo sginfo -a "$drive" | rg -o "Serial Number[ ']+(.+?)[ ']+" --replace '$1')"
	type="$(sudo blkid "$drive" | rg -o 'TYPE="(.+?)"' --replace '$1')"
	printf '%s\t%s\t%s\t%s\t%s\n' "$drive" "$serial" "$model" "$size" "$type"
done < <(sudo fdisk -l | rg -Uo 'Disk (/dev/.+?): (.+?),.+\nDisk model: (.+)' --replace $'$1\t$2\t$3')
