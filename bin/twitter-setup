#!/usr/bin/env bash
source "$DOTFILES/sources/strict.bash"

if ! command-exists twurl; then
	echo 'twurl gem dependency not installed, attempting install...'
	if ! gem-install twurl; then
		setup-ruby
		gem-install twurl
	fi
fi

if ! silent twurl accounts; then
	cat <<-EOF >/dev/stderr
		Blocking Twitter users requires twurl to be authorized.
		Follow the instructions here: https://github.com/twitter/twurl#getting-started
		Then run the following once:
		twurl authorize --consumer-key <api-key> --consumer-secret <api-secret-key>
	EOF
	exit 1
fi
