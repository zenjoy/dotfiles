#!/usr/bin/env bash
source "$DOTFILES/sources/strict.bash"

if is-help-empty "$@"; then
	cat <<-EOF >/dev/stderr
		ABOUT:
		Ensure directories have a trailing newline.
		Ensure files do not have a trailing newline.

		USAGE:
		ensure-trialing-slash <path>...
	EOF
	exit 22 # Invalid argument
fi

for arg in "$@"; do
	if test -d "$arg"; then
		if [[ "$arg" != */ ]]; then
			echo "$arg/"
		else
			echo "$arg"
		fi
	elif test -f "$arg"; then
		if [[ "$arg" = */ ]]; then
			length="${#arg}"
			echo "${arg:0:length-1}"
		else
			echo "$arg"
		fi
	else
		echo-style --error="[$arg] is not a file nor directory." >/dev/stderr
		exit 1
	fi
done
