#!/usr/bin/env bash
source "$DOTFILES/sources/strict.bash"

# =====================================
# Options

option_open=''
option_close=''
option_openclose=''
option_status=''
while test "$#" -ne 0; do
	if [[ "$1" = '--open='* ]]; then
		option_open="${1:7}"
	elif [[ "$1" = '--close='* ]]; then
		option_close="${1:8}"
	elif [[ "$1" = '--openclose='* ]]; then
		option_openclose="${1:12}"
	elif [[ "$1" = '--status='* ]]; then
		option_status="${1:9}"
	fi
	shift
done

# prepare args
args=()
if test -n "$option_open"; then
	args+=('--element_open' "--bold=$option_open" "--element_close")
elif test -n "$option_close"; then
	args+=('--element_slash_open' "--bold=$option_close" "--element_close")
elif test -n "$option_openclose"; then
	args+=('--element_open' "--bold=$option_openclose" "--element_slash_close")
fi
if test -n "$option_status"; then
	if test "$option_status" -eq 0; then
		# success
		args+=("--g3=[$option_status]")
	else
		# failure
		args+=("--e3=[$option_status]")
	fi
fi

# run
echo-style "${args[@]}"
